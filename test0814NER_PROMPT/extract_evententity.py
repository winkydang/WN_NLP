from dotenv import load_dotenv, find_dotenv
from openai import OpenAI

# 加载环境变量
load_dotenv(find_dotenv())

# 设置你的 OpenAI API 密钥
# openai.api_key = 'your-api-key-here'
client = OpenAI()


def extract_event_entities(title, content):
    # 定义提取事件要素的任务
    input_text = f"标题: {title}\n\n内容: {content}\n\n请提取以下信息：\n1. 核心要素\n2. 企业资质\n3. 行业领域\n4. 政策工具"


    # 调用 GPT-4 模型
    response = client.chat.completions.create(
      model="gpt-4o-mini",
      messages=[
            {"role": "system", "content": "你是一个智能助手，擅长从文本中提取结构化信息。请从给出的文本中提取出专精特新、高新技术企业、企业资质奖励、用人主体、研发增长奖励、房租补贴、平台服务支持、基础投资奖励、政府服务支持等格式的事件要素。"},
            {"role": "user", "content": input_text}
        ]
    )

    # 获取 GPT-4 模型的回答
    event_entities = response.choices[0].message.content
    # res = '、'.join(company_names.split('\n'))
    print("抽取出的事件要素如下：")
    # print(res)
    print(event_entities)
    return event_entities


if __name__ == '__main__':
    # 定义需要处理的文本
    title = """
        关于进一步促进专精特新、高新技术企业高质量发展的若干措施
    """
    content = """
        工委、管委会各机构，驻区各职能机构，各街道，各重点国有企业：

  现将《关于进一步促进专精特新、高新技术企业高质量发展的若干措施》印发给你们，请结合实际认真贯彻落实。

北京经济技术开发区管理委员会    

2023年11月28日  



关于进一步促进专精特新、高新技术企业高质量发展的若干措施

  为深入学习贯彻党的二十大精神和习近平总书记关于支持中小企业专精特新发展的重要指示精神，加快推动完善北京经济技术开发区（以下简称“经开区”）创新型企业梯度培育体系，支持“专精特新”“高新技术企业”等创新型企业高质量发展，实现规模和效能双提升，有力支撑北京国际科技创新中心和亦庄新城建设，结合实际，制定本措施。

  第一条 激励专精特新典型示范。对新迁入、首次获得认定或有效期满通过复核的国家专精特新“小巨人”企业，给予一次性资金奖励50万元；对新迁入、首次获得认定或有效期满通过复核的北京市专精特新中小企业，给予一次性资金奖励20万元。单个企业不重复支持，晋级享受差额奖励。（主责部门：科技创新局）

  第二条 支持高新技术企业资格认定。对新迁入、首次通过认定的国家高新技术企业，给予一次性资金奖励30万元；对有效期满再次申请并通过认定的国家高新技术企业，给予一次性资金奖励20万元；对首次完成入库备案、有效期满后申请换发证书的规模以上中关村高新技术企业，给予一次性资金奖励5万元。单个企业不重复支持，中关村高新技术企业申请通过国家高新技术企业认定后享受差额奖励。（主责部门：科技创新局）

  第三条 支持企业引育创新人才。分级、分类建立重点用人主体目录，在人才引进、培养、评价、激励等方面向重点用人主体授权。依据《北京经济技术开发区支持高精尖产业人才创新创业实施办法（2.0版）》，对于符合条件列入重点用人主体目录企业给予综合资助，自主用于人才队伍建设。（主责部门：组织人事部）

  第四条 支持企业持续加大研发投入。对年度研发费用增长超过年度目标值的国家专精特新“小巨人”企业，按照高出部分的20%给予支持，年度支持金额最高为300万元。（主责部门：科技创新局）

  第五条 实施“创新成长计划”。对纳入计划的北京市专精特新中小企业，按照最高1.5元/平方米/天，总面积不超过500平方米的标准给予房租补贴支持，租金低于1.5元/平方米/天或承租面积少于500平方米的，按照实际租金单价和承租面积计算。（主责部门：科技创新局）

  第六条 支持购买专业服务。面向中小企业发放“科技创新服务券”，对企业购买经认定的服务机构提供的专业化服务，给予50%的补助，年度支持金额最高为15万元。（主责部门：科技创新局）

  第七条 发挥科技创新资金作用。通过股权投资或“以赛代评”形式，支持符合经开区定位和相关产业政策、产业投资导向的科技创新型企业。采用直投形式时，对单个项目的投资金额原则上不超过2000万元，且不超过项目投资总额的30%；对独角兽、制造业单项冠军、国家专精特新“小巨人”等资质企业项目，给予在同等条件下优先投资支持。（主责部门：科技创新局）

  第八条 鼓励优质企业上市融资。持续深化与各大交易所合作，依托管家式服务机制、上市顾问制度，推动上市辅导服务常态化，加快企业上市进程。依据《关于进一步支持企业上市发展的若干措施（试行）》，支持企业在境内主板、科创板、创业板、北交所上市。（主责部门：商务金融局）

  第九条 发挥载体平台培育服务作用。引导重点园区、创新创业载体加强中小企业培育服务，积极推动建设专精特新特色园区和专精特新服务站，为企业全生命周期提供多样化、精准化、便捷化服务，促进创新型企业集聚发展。（主责部门：科技创新局）

  第十条 强化企业精准服务体系。区中小企业主管部门和产业专班进一步强化对优质中小企业的产业引导和企业服务工作；亦企服务港发挥企业服务聚合中枢作用，搭建政企沟通平台、诉求办理平台，全面开展联系服务企业工作；属地街镇落实属地职能，精准管理服务新扩区范围内优质中小企业，全面提升服务水平。（主责部门：经济发展局、科技创新局、各产业专班、亦企服务港、各属地街镇）

  本措施适用于在亦庄新城225平方公里范围内注册、纳税并进行统计登记，近3年无重大行政处罚记录和刑事犯罪记录，未列入严重违法失信主体名单的企业。

  本措施第一条、第二条，新迁入企业须在亦庄新城225平方公里范围内实际办公，于次年度统一兑现；除新迁入企业外，其他符合条件的企业，按公告或确认批次以免申即享方式兑现。

  本措施由北京经济技术开发区管理委员会负责解释，自公布之日起施行，至2025年12月31日结束。施行期间如遇国家及北京市相关政策调整的，按国家及北京市有关规定执行。
    """
    extract_event_entities(title, content)

